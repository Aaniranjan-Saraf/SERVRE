{"ast":null,"code":"import _slicedToArray from\"/home/aaniranjan/Documents/CODE/Dev/SERVRE/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Container,Form,Button,Alert,ListGroup}from'react-bootstrap';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),uploadStatus=_useState4[0],setUploadStatus=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),fileList=_useState6[0],setFileList=_useState6[1];useEffect(function(){fetchFileList();},[]);var handleFileChange=function handleFileChange(event){setSelectedFile(event.target.files[0]);};var handleUpload=function handleUpload(){if(selectedFile){var formData=new FormData();formData.append('file',selectedFile);axios.post('https://2948-2405-201-4014-2120-a22-705e-d1b1-6197.ngrok-free.app/upload',formData).then(function(res){console.log(res.data);setUploadStatus('success');fetchFileList();// Update the file list after successful upload\n}).catch(function(err){console.error(err);console.log(err.response);setUploadStatus('error');});}};var fetchFileList=function fetchFileList(){axios.get('https://2948-2405-201-4014-2120-a22-705e-d1b1-6197.ngrok-free.app/files').then(function(res){console.log(res.data);setFileList(res.data.files);}).catch(function(err){console.error(err);});};var handleDownload=function handleDownload(fileName){window.open(\"https://2948-2405-201-4014-2120-a22-705e-d1b1-6197.ngrok-free.app/download/\".concat(fileName),'_blank');};return/*#__PURE__*/_jsxs(Container,{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"File Upload\"}),uploadStatus==='success'&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",onClose:function onClose(){return setUploadStatus(null);},dismissible:true,children:\"File uploaded successfully.\"}),uploadStatus==='error'&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",onClose:function onClose(){return setUploadStatus(null);},dismissible:true,children:\"Error uploading file. Please try again.\"}),/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formFile\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Select a file\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:handleFileChange})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleUpload,children:\"Upload\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"File List\"}),fileList.length>0?/*#__PURE__*/_jsx(ListGroup,{children:fileList.map(function(fileName,index){return/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"div\",{children:fileName}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",size:\"sm\",onClick:function onClick(){return handleDownload(fileName);},children:\"Download\"})]},index);})}):/*#__PURE__*/_jsx(\"div\",{children:\"No files uploaded.\"})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Container","Form","Button","Alert","ListGroup","axios","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","selectedFile","setSelectedFile","_useState3","_useState4","uploadStatus","setUploadStatus","_useState5","_useState6","fileList","setFileList","fetchFileList","handleFileChange","event","target","files","handleUpload","formData","FormData","append","post","then","res","console","log","data","catch","err","error","response","get","handleDownload","fileName","window","open","concat","className","children","variant","onClose","dismissible","Group","controlId","Label","Control","type","onChange","onClick","length","map","index","Item","size"],"sources":["/home/aaniranjan/Documents/CODE/Dev/SERVRE/my-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Form, Button, Alert, ListGroup } from 'react-bootstrap';\nimport axios from 'axios';\n\nfunction App() {\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [uploadStatus, setUploadStatus] = useState(null);\n  const [fileList, setFileList] = useState([]);\n\n  useEffect(() => {\n    fetchFileList();\n  }, []);\n\n  const handleFileChange = (event) => {\n    setSelectedFile(event.target.files[0]);\n  };\n\n  const handleUpload = () => {\n    if (selectedFile) {\n      const formData = new FormData();\n      formData.append('file', selectedFile);\n\n      axios\n        .post('https://2948-2405-201-4014-2120-a22-705e-d1b1-6197.ngrok-free.app/upload', formData)\n        .then((res) => {\n          console.log(res.data);\n          setUploadStatus('success');\n          fetchFileList(); // Update the file list after successful upload\n        })\n        .catch((err) => {\n          console.error(err);\n          console.log(err.response);\n          setUploadStatus('error');\n        });\n    }\n  };\n\n  const fetchFileList = () => {\n    axios\n      .get('https://2948-2405-201-4014-2120-a22-705e-d1b1-6197.ngrok-free.app/files')\n      .then((res) => {\n        console.log(res.data);\n        setFileList(res.data.files);\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  };\n\n  const handleDownload = (fileName) => {\n    window.open(`https://2948-2405-201-4014-2120-a22-705e-d1b1-6197.ngrok-free.app/download/${fileName}`, '_blank');\n  };\n\n  return (\n    <Container className=\"mt-5\">\n      <h1>File Upload</h1>\n      {uploadStatus === 'success' && (\n        <Alert variant=\"success\" onClose={() => setUploadStatus(null)} dismissible>\n          File uploaded successfully.\n        </Alert>\n      )}\n      {uploadStatus === 'error' && (\n        <Alert variant=\"danger\" onClose={() => setUploadStatus(null)} dismissible>\n          Error uploading file. Please try again.\n        </Alert>\n      )}\n      <Form>\n        <Form.Group controlId=\"formFile\" className=\"mb-3\">\n          <Form.Label>Select a file</Form.Label>\n          <Form.Control type=\"file\" onChange={handleFileChange} />\n        </Form.Group>\n        <Button variant=\"primary\" onClick={handleUpload}>\n          Upload\n        </Button>\n      </Form>\n\n      <h2>File List</h2>\n      {fileList.length > 0 ? (\n        <ListGroup>\n          {fileList.map((fileName, index) => (\n            <ListGroup.Item key={index}>\n              <div>{fileName}</div>\n              <Button variant=\"secondary\" size=\"sm\" onClick={() => handleDownload(fileName)}>\n                Download\n              </Button>\n            </ListGroup.Item>\n          ))}\n        </ListGroup>\n      ) : (\n        <div>No files uploaded.</div>\n      )}\n    </Container>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}